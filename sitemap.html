<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saltwyk Design System — Site Index</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="assets/config/tailwind.config.js"></script>
    <link rel="stylesheet" href="assets/config/design-tokens.css">

    <style>
        .font-display { font-family: 'DM Serif Display', Georgia, serif; }
        .serial { font-weight: 600; font-size: 11px; letter-spacing: 0.12em; text-transform: uppercase; }
    </style>
</head>
<body class="bg-ledger text-ink p-8">
    <div class="max-w-4xl mx-auto">

        <nav class="flex items-center gap-2 text-sm text-warm-500 mb-8">
            <a href="index.html" class="hover:text-emerald-600">Design System</a>
            <span>→</span>
            <span class="text-ink font-medium">Site Index</span>
        </nav>

        <header class="mb-12">
            <p class="serial text-emerald-600 mb-2">Navigation</p>
            <h1 class="font-display text-4xl mb-2">Site Index</h1>
            <p class="text-warm-600 mb-4">Complete index of all pages in the Saltwyk Design System.</p>
            <p class="text-sm text-warm-500">
                Machine-readable version: <a href="sitemap.json" class="text-emerald-600 hover:underline font-medium">sitemap.json</a>
            </p>
        </header>

        <!-- Sections container - populated by JavaScript -->
        <div id="sitemap-content">
            <p class="text-warm-500">Loading sitemap...</p>
        </div>

        <!-- Fallback static content for non-JS environments -->
        <noscript>
            <div class="space-y-8">
                <!-- Core -->
                <section class="bg-white border-2 border-warm-200 rounded-xl overflow-hidden">
                    <div class="p-5 border-b border-warm-100 bg-warm-50">
                        <div class="flex items-center justify-between mb-1">
                            <p class="serial text-emerald-600">Core</p>
                            <span class="text-xs px-2 py-0.5 rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700">stable</span>
                        </div>
                        <p class="text-sm text-warm-600">Shared tokens across all contexts.</p>
                    </div>
                    <ul class="divide-y divide-warm-100">
                        <li><a href="core-colors.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Colors</span><span class="text-warm-500 text-sm ml-2">— Complete color palette with scales and usage guidelines</span></a></li>
                        <li><a href="core-typography.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Typography</span><span class="text-warm-500 text-sm ml-2">— Font families, type scale, and text styling</span></a></li>
                        <li><a href="core-buttons.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Buttons</span><span class="text-warm-500 text-sm ml-2">— Button variants, sizes, states, and icons</span></a></li>
                        <li><a href="core-logos.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Logos</span><span class="text-warm-500 text-sm ml-2">— Official logos with usage guidelines</span></a></li>
                        <li><a href="core-threads.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Thread Lines</span><span class="text-warm-500 text-sm ml-2">— Decorative thread line patterns</span></a></li>
                        <li><a href="core-gradients.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Gradients</span><span class="text-warm-500 text-sm ml-2">— Brand and thread-based gradients</span></a></li>
                        <li><a href="core-spacing.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Spacing & Layout</span><span class="text-warm-500 text-sm ml-2">— Spacing scale and grid system</span></a></li>
                    </ul>
                </section>

                <!-- Product -->
                <section class="bg-white border-2 border-warm-200 rounded-xl overflow-hidden">
                    <div class="p-5 border-b border-warm-100 bg-warm-50">
                        <div class="flex items-center justify-between mb-1">
                            <p class="serial text-intaglio-600">Product</p>
                            <span class="text-xs px-2 py-0.5 rounded-full border border-emerald-200 bg-emerald-50 text-emerald-700">stable</span>
                        </div>
                        <p class="text-sm text-warm-600">Components for dashboard, wallet, checkout widget.</p>
                    </div>
                    <ul class="divide-y divide-warm-100">
                        <li><a href="product-components.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Common Components</span><span class="text-warm-500 text-sm ml-2">— Shared building blocks</span></a></li>
                        <li><a href="product-shopper-passport.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Shopper Passport</span><span class="text-warm-500 text-sm ml-2">— Consumer wallet app components</span></a></li>
                        <li><a href="product-checkout-widget.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Checkout Widget</span><span class="text-warm-500 text-sm ml-2">— Embedded checkout components</span></a></li>
                        <li><a href="product-forms.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Forms</span><span class="text-warm-500 text-sm ml-2">— Form controls and validation</span></a></li>
                        <li><a href="product-surfaces.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Surfaces</span><span class="text-warm-500 text-sm ml-2">— Cards, modals, and elevation</span></a></li>
                    </ul>
                </section>

                <!-- Marketing -->
                <section class="bg-white border-2 border-warm-200 rounded-xl overflow-hidden">
                    <div class="p-5 border-b border-warm-100 bg-warm-50">
                        <div class="flex items-center justify-between mb-1">
                            <p class="serial text-cyan-600">Marketing</p>
                            <span class="text-xs px-2 py-0.5 rounded-full border border-orange-200 bg-orange-50 text-orange-700">draft</span>
                        </div>
                        <p class="text-sm text-warm-600">Extended treatments for marketing pages.</p>
                    </div>
                    <ul class="divide-y divide-warm-100">
                        <li><a href="marketing-heroes.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Heroes</span><span class="text-warm-500 text-sm ml-2">— Hero section variants</span></a></li>
                        <li><a href="marketing-illustrations.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Illustrations</span><span class="text-warm-500 text-sm ml-2">— Illustration style guide</span></a></li>
                        <li><a href="marketing-components.html" class="block px-5 py-3 hover:bg-warm-50 transition-colors"><span class="font-medium">Components</span><span class="text-warm-500 text-sm ml-2">— Marketing components</span></a></li>
                    </ul>
                </section>
            </div>
        </noscript>

        <!-- Metadata -->
        <section class="mt-12 pt-8 border-t-2 border-warm-200">
            <p class="serial text-warm-500 mb-4">Metadata</p>
            <div class="bg-white border-2 border-warm-200 rounded-lg p-6">
                <dl class="grid grid-cols-2 gap-4 text-sm">
                    <div>
                        <dt class="text-warm-500">Version</dt>
                        <dd class="font-medium" id="meta-version">0.6.0</dd>
                    </div>
                    <div>
                        <dt class="text-warm-500">Last Updated</dt>
                        <dd class="font-medium" id="meta-updated">2026-01-11</dd>
                    </div>
                    <div>
                        <dt class="text-warm-500">Total Pages</dt>
                        <dd class="font-medium" id="meta-pages">15</dd>
                    </div>
                    <div>
                        <dt class="text-warm-500">Repository</dt>
                        <dd><a href="https://github.com/Saltwyk/saltwyk-design" class="text-emerald-600 hover:underline font-medium">GitHub</a></dd>
                    </div>
                </dl>
            </div>
        </section>

        <footer class="pt-8 mt-8 border-t-2 border-warm-200 flex items-center justify-between">
            <p class="text-sm text-warm-500">Saltwyk Design System — Site Index</p>
            <a href="index.html" class="text-sm text-emerald-600 hover:underline">← Back to Home</a>
        </footer>
    </div>

    <script>
        // Fetch and render sitemap from JSON
        async function loadSitemap() {
            try {
                const response = await fetch('sitemap.json');
                const sitemap = await response.json();
                renderSitemap(sitemap);
                updateMeta(sitemap);
            } catch (error) {
                console.error('Failed to load sitemap:', error);
                // Fallback content is already in noscript tag
            }
        }

        function renderSitemap(sitemap) {
            const container = document.getElementById('sitemap-content');
            const sectionColors = {
                core: 'emerald',
                product: 'intaglio',
                marketing: 'cyan'
            };

            let html = '<div class="space-y-8">';

            for (const section of sitemap.sections) {
                const color = sectionColors[section.slug] || 'warm';
                const statusColor = section.status === 'stable' ? 'emerald' : 'orange';

                html += `
                    <section class="bg-white border-2 border-warm-200 rounded-xl overflow-hidden">
                        <div class="p-5 border-b border-warm-100 bg-warm-50">
                            <div class="flex items-center justify-between mb-1">
                                <p class="serial text-${color}-600">${section.name}</p>
                                <span class="text-xs px-2 py-0.5 rounded-full border border-${statusColor}-200 bg-${statusColor}-50 text-${statusColor}-700">${section.status}</span>
                            </div>
                            <p class="text-sm text-warm-600">${section.description}</p>
                        </div>
                        <ul class="divide-y divide-warm-100">
                `;

                for (const page of section.pages) {
                    html += `
                        <li>
                            <a href="${page.path}" class="block px-5 py-3 hover:bg-warm-50 transition-colors group">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <span class="font-medium group-hover:text-${color}-600 transition-colors">${page.title}</span>
                                        <span class="text-warm-500 text-sm ml-2">— ${page.description}</span>
                                    </div>
                                    <i data-lucide="arrow-right" class="w-4 h-4 text-warm-300 group-hover:text-${color}-500 transition-colors"></i>
                                </div>
                            </a>
                        </li>
                    `;
                }

                html += '</ul></section>';
            }

            html += '</div>';
            container.innerHTML = html;

            // Re-initialize Lucide icons for dynamically added content
            lucide.createIcons();
        }

        function updateMeta(sitemap) {
            document.getElementById('meta-version').textContent = sitemap.version;
            document.getElementById('meta-updated').textContent = sitemap.lastUpdated;

            const totalPages = sitemap.sections.reduce((sum, section) => sum + section.pages.length, 0);
            document.getElementById('meta-pages').textContent = totalPages;
        }

        // Load sitemap on page load
        loadSitemap();
    </script>

    <script>lucide.createIcons();</script>
</body>
</html>
